global:
  environment: prod
  logLevel: warn

backend:
  enabled: true
  image:
    repository: 235494787667.dkr.ecr.ap-south-1.amazonaws.com/backend 
    tag: v1.0.0
    pullPolicy: IfNotPresent
  replicaCount: 3
  service:
    type: ClusterIP
    port: 8000
  containerPort: 8000
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1000m"
      memory: "2Gi"
  health:
    livenessPath: /health/live
    readinessPath: /health/ready
    livenessInitialDelay: 30
    readinessInitialDelay: 10
    livenessPeriod: 10
    readinessPeriod: 5
    timeout: 2
    failureThreshold: 3
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
  secrets:
    enabled: true
    name: backend-secrets
  externalMongo:
    enabled: false

frontend:
  enabled: true
  image:
    repository: 235494787667.dkr.ecr.ap-south-1.amazonaws.com/frontend
    tag: v1.0.0
    pullPolicy: IfNotPresent
  replicaCount: 3
  service:
    type: ClusterIP
    port: 3000
  containerPort: 3000
  resources:
    requests:
      cpu: "200m"
      memory: "512Mi"
    limits:
      cpu: "500m"
      memory: "1Gi"
  health:
    livenessPath: /
    readinessPath: /
    livenessInitialDelay: 20
    readinessInitialDelay: 5
    livenessPeriod: 15
    readinessPeriod: 5
    timeout: 2
    failureThreshold: 3

ml:
  enabled: true
  image:
    repository: 235494787667.dkr.ecr.ap-south-1.amazonaws.com/ml
    tag: v1.0.0
    pullPolicy: IfNotPresent
  replicaCount: 2
  containerPort: 9000
  resources:
    requests:
      cpu: "2000m"
      memory: "4Gi"
    limits:
      cpu: "4000m"
      memory: "8Gi"
  nodeSelector:
    workload: ml
  health:
    livenessPath: /health/live
    readinessPath: /health/ready
    livenessInitialDelay: 60
    readinessInitialDelay: 20
    livenessPeriod: 15
    readinessPeriod: 10
    timeout: 3
    failureThreshold: 3
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 60
  secrets:
    enabled: true
    name: ml-secrets

worker:
  enabled: true
  image:
    repository: 235494787667.dkr.ecr.ap-south-1.amazonaws.com/worker
    tag: v1.0.0
    pullPolicy: IfNotPresent
  replicaCount: 2
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1000m"
      memory: "2Gi"
  nodeSelector:
    workload: general

mongodb:
  enabled: false

externalMongo:
  enabled: true
  host: mongodb-prod.example.com
  port: 27017
  database: chatbotdb
  username: chatbot
  passwordSecret:
    name: mongodb-secrets
    key: password

ingress:
  enabled: true
  className: alb
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}]'
    alb.ingress.kubernetes.io/ssl-redirect: "443"
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:ap-south-1:235494787667:certificate/REPLACE_WITH_PROD_CERT_ID
    alb.ingress.kubernetes.io/load-balancer-attributes: routing.http2.enabled=true
  hosts:
    - host: chatbot.example.com
      paths:
        - path: /
          pathType: Prefix
          serviceName: frontend
          servicePort: 3000
        - path: /api
          pathType: Prefix
          serviceName: backend
          servicePort: 8000
        - path: /ml
          pathType: Prefix
          serviceName: ml
          servicePort: 9000